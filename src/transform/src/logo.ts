import { Colors } from "assemblyscript/util/terminal.js";
import { WriteStream as FSWriteStream } from "fs";
import { WriteStream as TTYWriteStream } from "tty";

export default (stream: FSWriteStream | TTYWriteStream, svg = false) => {
  if (svg) {
    writeSvgLogo(stream);
  } else {
    writeAsciiLogo(stream);
  }
};

function writeAsciiLogo(stream: FSWriteStream | TTYWriteStream) {
  const logo = String.raw`
     __ __                                __   
    / // /_ _____  ___ ______ _  ___  ___/ /__ 
   / _  / // / _ \/ -_) __/  ' \/ _ \/ _  / -_)
  /_//_/\_, / .__/\__/_/ /_/_/_/\___/\_,_/\__/ 
       /___/_/                                 
`;
  const colors = new Colors(stream as { isTTY: boolean });
  stream.write(colors.blue(logo) + "\n");
}

function writeSvgLogo(stream: FSWriteStream | TTYWriteStream) {
  const logo = String.raw`
<svg width="160" height="24" viewBox="0 0 160 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="scale-105">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M2.64764 0H10.0173L7.36967 10.3598H0L2.64764 0ZM6.0172 10.3599L2.91136 22.6282L14.2255 10.3599L6.0172 10.3599Z" fill="currentColor"></path>
  <path d="M16.8233 0H24.1929L18.3228 22.969H10.9531L16.8233 0Z" fill="currentColor"></path>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M139.147 19.9788C137.546 19.9788 136.297 19.4232 135.4 18.3119C134.511 17.2007 134.066 15.6488 134.066 13.6563C134.066 11.6408 134.511 10.0774 135.4 8.96618C136.289 7.85495 137.538 7.29934 139.147 7.29934C141.27 7.29934 142.722 8.10019 143.504 9.70188H143.677V2.42529H146.125V19.7489H143.952L143.677 17.5647H143.504C143.113 18.3311 142.535 18.925 141.768 19.3465C141.01 19.768 140.136 19.9788 139.147 19.9788ZM139.929 17.9786C141.056 17.9786 141.96 17.6452 142.642 16.9785C143.332 16.3117 143.677 15.4304 143.677 14.3345V12.9436C143.677 11.8477 143.332 10.9664 142.642 10.2996C141.96 9.63291 141.056 9.29954 139.929 9.29954C138.895 9.29954 138.075 9.58309 137.469 10.1502C136.864 10.7096 136.561 11.4837 136.561 12.4723V14.8058C136.561 15.7868 136.856 16.5608 137.446 17.1279C138.036 17.695 138.864 17.9786 139.929 17.9786ZM36.5478 19.7489H33.9844V2.58623H36.5478V9.9088H45.8476V2.58623H48.4111V19.7489H45.8476V12.0469H36.5478V19.7489ZM55.2053 18.22L50.1014 7.36831H52.7338L54.4351 11.3457L56.3204 15.8634H56.4583L58.3895 11.3457L60.1024 7.36831H62.7233L57.6782 18.22L55.2053 23.6803H52.8028L55.2053 18.22ZM64.1377 23.6803H66.5632V17.4153H66.7242C67.5288 19.0323 68.9811 19.8408 71.0809 19.8408C72.6903 19.8408 73.9433 19.2852 74.8399 18.174C75.7365 17.0628 76.1849 15.4994 76.1849 13.4839C76.1849 11.476 75.7365 9.91646 74.8399 8.80524C73.9433 7.68635 72.6903 7.12691 71.0809 7.12691C70.0923 7.12691 69.2148 7.34149 68.4485 7.77065C67.6898 8.19215 67.115 8.78608 66.7242 9.55244H66.5632L66.2758 7.36831H64.1377V23.6803ZM72.7592 17.0015C72.1538 17.5609 71.3338 17.8406 70.2992 17.8406C69.1803 17.8406 68.276 17.5073 67.5863 16.8405C66.9043 16.1738 66.5632 15.2925 66.5632 14.1966V12.7826C66.5632 11.6868 66.9043 10.8093 67.5863 10.1502C68.2684 9.48347 69.1727 9.1501 70.2992 9.1501C71.3568 9.1501 72.1806 9.43749 72.7707 10.0123C73.3685 10.5794 73.6674 11.3457 73.6674 12.3113V14.6679C73.6674 15.6565 73.3647 16.4344 72.7592 17.0015ZM77.8521 13.5298C77.8521 11.5296 78.3771 9.96244 79.427 8.82823C80.4769 7.69402 81.9062 7.12691 83.7148 7.12691C85.4238 7.12691 86.7802 7.62888 87.7842 8.63281C88.8034 9.65207 89.3131 11.0277 89.3131 12.7597C89.3131 13.1658 89.2824 13.6103 89.2211 14.0931H80.3466V14.7828C80.3466 15.7638 80.6609 16.557 81.2893 17.1624C81.9177 17.7602 82.7415 18.059 83.7608 18.059C84.5655 18.059 85.2514 17.8713 85.8185 17.4958C86.3932 17.1202 86.7764 16.6144 86.968 15.9784H89.359C89.1138 17.1892 88.4777 18.1587 87.4508 18.8867C86.4315 19.6147 85.1939 19.9788 83.7378 19.9788C81.9139 19.9788 80.4769 19.4002 79.427 18.243C78.3771 17.0858 77.8521 15.5147 77.8521 13.5298ZM80.3466 12.0699V12.3573H86.8645V11.955C86.8645 11.089 86.5733 10.3916 85.9909 9.86282C85.4085 9.32636 84.6421 9.05814 83.6918 9.05814C82.7032 9.05814 81.8985 9.33786 81.2778 9.8973C80.657 10.4491 80.3466 11.1733 80.3466 12.0699ZM98.1994 7.36831H93.9117C93.1223 7.36831 92.5667 7.55224 92.2448 7.92009C91.9306 8.28795 91.7735 8.80907 91.7735 9.48347V19.7489H94.1991V9.39151H98.1994V7.36831ZM102.327 19.7489H99.9012V7.36831H101.993L102.327 9.66739H102.511C103.216 7.97374 104.465 7.12691 106.258 7.12691C107.147 7.12691 107.906 7.36831 108.534 7.85112C109.163 8.32626 109.603 8.97384 109.856 9.79384H110.052C110.81 8.01589 112.151 7.12691 114.075 7.12691C115.378 7.12691 116.386 7.56374 117.098 8.43739C117.811 9.30337 118.167 10.5219 118.167 12.0929V19.7489H115.742V12.3803C115.742 10.2422 114.903 9.17309 113.224 9.17309C112.289 9.17309 111.561 9.52562 111.04 10.2307C110.519 10.9281 110.259 11.8783 110.259 13.0815V19.7489H107.81V12.4263C107.81 10.2575 106.986 9.17309 105.339 9.17309C104.427 9.17309 103.695 9.52562 103.143 10.2307C102.599 10.9357 102.327 11.8783 102.327 13.0585V19.7489ZM120.398 13.5528C120.398 15.5377 120.931 17.1087 121.996 18.266C123.069 19.4078 124.536 19.9788 126.399 19.9788C128.268 19.9788 129.736 19.4002 130.801 18.243C131.867 17.0858 132.399 15.5224 132.399 13.5528C132.399 11.5526 131.844 9.98543 130.732 8.85122C129.629 7.70168 128.184 7.12691 126.399 7.12691C124.559 7.12691 123.099 7.70168 122.019 8.85122C120.938 10.0008 120.398 11.568 120.398 13.5528ZM122.869 14.5644V12.6447C122.869 11.6025 123.195 10.7633 123.847 10.1272C124.498 9.49113 125.349 9.17309 126.399 9.17309C127.433 9.17309 128.276 9.49496 128.928 10.1387C129.579 10.7748 129.905 11.6101 129.905 12.6447V14.5644C129.905 15.6143 129.579 16.442 128.928 17.0474C128.284 17.6529 127.441 17.9556 126.399 17.9556C125.349 17.9556 124.498 17.6567 123.847 17.0589C123.195 16.4535 122.869 15.622 122.869 14.5644ZM150.068 8.82823C149.019 9.96244 148.494 11.5296 148.494 13.5298C148.494 15.5147 149.019 17.0858 150.068 18.243C151.118 19.4002 152.555 19.9788 154.379 19.9788C155.835 19.9788 157.073 19.6147 158.092 18.8867C159.119 18.1587 159.755 17.1892 160 15.9784H157.609C157.418 16.6144 157.035 17.1202 156.46 17.4958C155.893 17.8713 155.207 18.059 154.402 18.059C153.383 18.059 152.559 17.7602 151.931 17.1624C151.302 16.557 150.988 15.7638 150.988 14.7828V14.0931H159.863C159.924 13.6103 159.954 13.1658 159.954 12.7597C159.954 11.0277 159.445 9.65207 158.426 8.63281C157.422 7.62888 156.065 7.12691 154.356 7.12691C152.548 7.12691 151.118 7.69402 150.068 8.82823ZM150.988 12.3573V12.0699C150.988 11.1733 151.298 10.4491 151.919 9.8973C152.54 9.33786 153.345 9.05814 154.333 9.05814C155.284 9.05814 156.05 9.32636 156.632 9.86282C157.215 10.3916 157.506 11.089 157.506 11.955V12.3573H150.988Z" fill="currentColor"></path>
</svg>
`;
  stream.write(logo + "\n");
}
